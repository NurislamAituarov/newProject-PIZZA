{"version":3,"sources":["components/cart/CartItems.jsx","components/cart/Cart.jsx"],"names":["CartItems","memo","item","countTotal","dispatch","useDispatch","cartItem","useRef","hr","useEffect","current","addEventListener","style","backgroundColor","totalCount","id","ref","className","src","url","alt","name","type","size","length","display","onClick","countRemove","countAdd","price","deletedBasketItem","Cart","pizzaItem","useSelector","state","totalPrices","filterPizzaId","count","statePizzaItems","Object","values","map","obj","forEach","i","tips","Helmet","content","deletedBasket","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","TransitionGroup","components","undefined","CSSTransition","timeout","classNames","exact","to","div","document","createElement","querySelector","appendChild","classList","add","innerHTML","fetch","method","headers","body","JSON","stringify","then","response","json","data","getElementById","console","log","setTimeout","remove","finally"],"mappings":"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","file":"static/js/3.8710a4bb.chunk.js","sourcesContent":["import { memo, useEffect, useRef } from 'react';\nimport './cartItems.scss';\nimport { useDispatch } from 'react-redux';\nimport { deletedBasketItem, countAdd, countRemove } from '../../action/action';\n\nconst CartItems = memo(({ item, countTotal }) => {\n  const dispatch = useDispatch();\n  const cartItem = useRef();\n  const hr = useRef();\n\n  useEffect(() => {\n    cartItem.current.addEventListener('mouseover', () => {\n      hr.current.style.backgroundColor = '#e2b00b';\n    });\n    cartItem.current.addEventListener('mouseout', () => {\n      hr.current.style.backgroundColor = 'rgba(243, 243, 243, 0.4)';\n    });\n  }, []);\n\n  const totalCount = countTotal[item.id];\n  // console.log(countTotal, totalCount.length);\n\n  function totalCountAdd(id) {\n    dispatch(countAdd(id));\n  }\n  function totalCountRemove(id) {\n    dispatch(countRemove(id));\n  }\n  return (\n    <>\n      <div ref={cartItem} className=\"cart__item\">\n        <div className=\"first\">\n          <div className=\"cart__item-img\">\n            <img className=\"pizza-block__image\" src={item.url} alt=\"Pizza\" />\n          </div>\n          <div className=\"cart__item-info\">\n            <h3>{item.name}</h3>\n            <p>\n              {item.type}, {item.size} см.\n            </p>\n          </div>\n        </div>\n        <div className=\"second\">\n          <div className=\"cart__item-count\">\n            <strong\n              style={totalCount.length === 1 ? { display: 'none' } : null}\n              onClick={() => totalCountRemove(item.id)}>\n              -\n            </strong>\n            <b>{totalCount.length}</b>\n            <strong onClick={() => totalCountAdd(item.id)}>+</strong>\n          </div>\n          <div className=\"cart__item-price\">\n            <b>{item.price * totalCount.length} ₽</b>\n          </div>\n          <div className=\"cart__item-remove\">\n            <span onClick={() => dispatch(deletedBasketItem(item.id))}>X</span>\n          </div>\n        </div>\n      </div>\n      <hr ref={hr}></hr>\n    </>\n  );\n});\n\nexport default CartItems;\n","import { NavLink } from 'react-router-dom';\nimport CartItems from './CartItems';\nimport './cart.scss';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { deletedBasket } from '../../action/action';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport { Helmet } from 'react-helmet';\n\nconst Cart = () => {\n  const pizzaItem = useSelector((state) => state.totalCount);\n  const price = useSelector((state) => state.totalPrices);\n  const dispatch = useDispatch();\n  const state = useSelector((state) => state.filterPizzaId);\n  const totalCount = useSelector((state) => state.count);\n  // console.log(state);\n\n  const statePizzaItems = Object.values(state).map((item) => {\n    // console.log(item);\n    return item[0];\n  });\n  // console.log(statePizzaItems);\n\n  const obj = {};\n  pizzaItem.forEach((item, i) => {\n    obj.name = obj.name ? obj.name + ', ' + item.name : item.name;\n    obj.price = obj.price ? +obj.price + +item.price : item.price;\n    obj.type = obj.type ? obj.type + ', ' + item.type : item.type;\n    obj.tips = (obj.price * 5) / 100;\n    // obj.size = item.size;\n  });\n  // console.log(obj);\n  function onSubmit() {\n    const div = document.createElement('div');\n    document.querySelector('.cart__bottom').appendChild(div);\n    div.classList.add('added-words');\n    div.innerHTML = 'оплата обрабатывается';\n\n    fetch('https://jsonplaceholder.typicode.com/posts', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(obj),\n    })\n      .then((response) => {\n        div.innerHTML = 'оплата прошла успешно';\n        return response.json();\n      })\n      .then((data) => {\n        const div = document.createElement('div');\n        div.innerHTML = `чаевые ${data.tips} ₽`;\n        document.getElementById('price-num').appendChild(div);\n        console.log(data);\n        setTimeout(() => {\n          div.remove();\n        }, 5000);\n      })\n      .finally(() => {\n        setTimeout(() => {\n          dispatch(deletedBasket());\n          div.remove();\n        }, 2000);\n      });\n  }\n\n  return (\n    <>\n      <Helmet>\n        <meta name=\"description\" content=\"Web site created using create-react-app\" />\n        <title>basket of pizzas in react</title>\n      </Helmet>\n      <div className=\"content\">\n        <div className=\"container container--cart\">\n          <div className=\"cart\">\n            <div className=\"cart__top\">\n              <h2 className=\"content__title\">Корзина</h2>\n              <div onClick={() => dispatch(deletedBasket())} className=\"cart__clear\">\n                <svg\n                  width=\"20\"\n                  height=\"20\"\n                  viewBox=\"0 0 20 20\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\">\n                  <path\n                    d=\"M2.5 5H4.16667H17.5\"\n                    stroke=\"#B6B6B6\"\n                    strokeWidth=\"1.2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                  />\n                  <path\n                    d=\"M6.66663 5.00001V3.33334C6.66663 2.89131 6.84222 2.46739 7.15478 2.15483C7.46734 1.84227 7.89127 1.66667 8.33329 1.66667H11.6666C12.1087 1.66667 12.5326 1.84227 12.8451 2.15483C13.1577 2.46739 13.3333 2.89131 13.3333 3.33334V5.00001M15.8333 5.00001V16.6667C15.8333 17.1087 15.6577 17.5326 15.3451 17.8452C15.0326 18.1577 14.6087 18.3333 14.1666 18.3333H5.83329C5.39127 18.3333 4.96734 18.1577 4.65478 17.8452C4.34222 17.5326 4.16663 17.1087 4.16663 16.6667V5.00001H15.8333Z\"\n                    stroke=\"#B6B6B6\"\n                    strokeWidth=\"1.2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                  />\n                  <path\n                    d=\"M8.33337 9.16667V14.1667\"\n                    stroke=\"#B6B6B6\"\n                    strokeWidth=\"1.2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                  />\n                  <path\n                    d=\"M11.6666 9.16667V14.1667\"\n                    stroke=\"#B6B6B6\"\n                    strokeWidth=\"1.2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                  />\n                </svg>\n\n                <span>Очистить корзину</span>\n              </div>\n            </div>\n            <TransitionGroup components=\"div\" className=\"content__items__cart\">\n              {statePizzaItems.map((item) => {\n                if (item !== undefined) {\n                  return (\n                    <CSSTransition key={item.id} timeout={500} classNames=\"cart-node\">\n                      <CartItems key={item.id} item={item} countTotal={state} />\n                    </CSSTransition>\n                  );\n                } else {\n                  return null;\n                }\n              })}\n            </TransitionGroup>\n            <div className=\"cart__bottom\">\n              <div className=\"cart__bottom-details\">\n                <span>\n                  {' '}\n                  Всего пицц: <b>{totalCount} шт.</b>{' '}\n                </span>\n                <span id=\"price-num\">\n                  {' '}\n                  Сумма заказа: <b>{price} ₽</b>{' '}\n                </span>\n              </div>\n              <div className=\"cart__bottom-buttons\">\n                <NavLink exact to=\"/\" className=\"button button--outline button--add go-back-btn\">\n                  <svg\n                    width=\"8\"\n                    height=\"14\"\n                    viewBox=\"0 0 8 14\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\">\n                    <path\n                      d=\"M7 13L1 6.93015L6.86175 1\"\n                      stroke=\"#D3D3D3\"\n                      strokeWidth=\"1.5\"\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                    />\n                  </svg>\n\n                  <span>Вернуться назад</span>\n                </NavLink>\n                <div onClick={onSubmit} className=\"button pay-btn\">\n                  <span>Оплатить сейчас</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\nexport default Cart;\n"],"sourceRoot":""}